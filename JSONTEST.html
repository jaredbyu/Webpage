<!DOCTYPE html>
<html>
  <head>
    <title>JSON Test</title>
  </head>
<body>

<h2>Create Object from JSON String</h2>
  <p>JSON object here is an array of strings representing a json object.</p>
  <br>
  <p>List of all employees</p>
<p id="test"></p>

 <br><br>
  
  <p>Now We will load a Json File, and display it but with real JSON data!</p>
  <button onclick="getJson()">Load Employee JSON File</button>
  <p id="loadtest"></p>
  
  <script src="employee.json"></script>
<script>
 
var text = '{"employees":[' +
'{"firstName":"John","lastName":"Doe" },' +
'{"firstName":"Anna","lastName":"Smith" },' +
'{"firstName":"Peter","lastName":"Jones" }]}';

obj = JSON.parse(text);
document.getElementById("test").innerHTML =
obj.employees[0].firstName + " " + obj.employees[0].lastName + " - " + obj.employees[1].firstName + " " + obj.employees[1].lastName + " - " + obj.employees[2].firstName + " " + obj.employees[2].lastName;
  
function getJson(){
  document.getElementById("test").innerHTML = "Foo"
    var Fobj = new XMLHttpRequest();
  var response;
    loadJSON(response);
    Fobj = JSON.parse(response);
    document.getElementById("loadtest").innerHTML = Fobj.employees[0].firstName + " " + Fobj.employees[0].lastName + " - " + Fobj.employees[1].firstName + " " + Fobj.employees[1].lastName + " - " + Fobj.employees[2].firstName + " " + Fobj.employees[2].lastName;
}
  
  function loadJSON(callback) {   

    var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
    xobj.open('GET', 'my_data.json', true); // Replace 'my_data' with the path to your file
    xobj.onreadystatechange = function () {
          if (xobj.readyState == 4 && xobj.status == "200") {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            callback(xobj.responseText);
          }
    };
    xobj.send(null);  
 }
</script>

</body>
</html>
